# Helionyx Environment Configuration Template
# 
# Copy this to .env.dev, .env.staging, or .env.live and fill in your values
# Environment-specific files override base .env settings
#
# Usage:
#   ENV=dev make run      # Uses .env.dev
#   ENV=staging make run  # Uses .env.staging
#   ENV=live make run     # Uses .env.live

# =============================================================================
# Environment (set via ENV variable, not in file)
# =============================================================================
# ENV=dev|staging|live    # Set via environment variable or CLI

# =============================================================================
# Storage Configuration
# =============================================================================

# Event store (append-only log)
EVENT_STORE_PATH=./data/events

# Projection database
PROJECTIONS_DB_PATH=./data/projections/helionyx.db

# Backup/restore scripts (optional override)
# Default is ./data/backups/<env>/... unless BACKUP_ROOT is set.
BACKUP_ROOT=

# =============================================================================
# API Server Configuration
# =============================================================================

# API server host (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
API_HOST=0.0.0.0

# API server port (must be unique per environment on same host)
API_PORT=8000

# Comma-separated origins allowed for browser access to API
API_CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# =============================================================================
# OpenAI LLM Configuration
# =============================================================================

# Required: Your OpenAI API key
OPENAI_API_KEY=

# Model selection (gpt-4o-mini recommended for cost efficiency)
OPENAI_MODEL=gpt-4o-mini

# LLM parameters
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# Rate limiting
OPENAI_RATE_LIMIT_RPM=10           # Requests per minute
OPENAI_RATE_LIMIT_TPM=150000       # Tokens per minute

# Error handling
LLM_MAX_RETRIES=3
LLM_RETRY_BASE_DELAY=1.0

# Cost control (in USD)
LLM_DAILY_COST_WARNING_USD=1.0
LLM_DAILY_COST_LIMIT_USD=10.0

# =============================================================================
# Telegram Bot Configuration
# =============================================================================

# Required: Create bot via @BotFather and get token
TELEGRAM_BOT_TOKEN=

# Required: Your Telegram user chat ID (logged when you /start the bot)
TELEGRAM_CHAT_ID=

# Notification settings
NOTIFICATIONS_ENABLED=true
DAILY_SUMMARY_HOUR=20              # 8 PM (24-hour format)
REMINDER_WINDOW_START=8            # 8 AM
REMINDER_WINDOW_END=21             # 9 PM
REMINDER_ADVANCE_HOURS=24          # Remind 24h before due date

# =============================================================================
# Logging
# =============================================================================

LOG_LEVEL=INFO

# =============================================================================
# Environment-Specific Examples (Same-Host Multi-Environment Deployment)
# =============================================================================
#
# Helionyx supports running dev, staging, and live environments simultaneously
# on the same host (e.g., node1). Each environment must be fully isolated.
#
# CRITICAL REQUIREMENTS FOR SAME-HOST DEPLOYMENT:
# ------------------------------------------------
# 1. DISTINCT API PORTS - Each environment binds to a unique port
# 2. SEPARATE DATA DIRECTORIES - Event stores and projection DBs must not be shared
# 3. UNIQUE TELEGRAM BOTS - Each environment needs its own bot (create via @BotFather)
# 4. DISTINCT SYSTEMD SERVICES - Service names must not conflict
#
# Port Assignments (Standard Convention):
#   - dev:     8000
#   - staging: 8001
#   - live:    8002
#
# Systemd Service Names:
#   - dev:     helionyx-dev.service
#   - staging: helionyx-staging.service
#   - live:    helionyx.service
#
# Data Path Patterns:
#   - dev/staging: ./data/{env}/* (relative paths, development-friendly)
#   - live:        /var/lib/helionyx/live/* (absolute paths, production-appropriate)
#
# -----------------------------------------------------------------------------
# Example: .env.dev (Development Environment)
# -----------------------------------------------------------------------------
# LOG_LEVEL=DEBUG
# API_HOST=0.0.0.0
# API_PORT=8000
#
# EVENT_STORE_PATH=./data/dev/events
# PROJECTIONS_DB_PATH=./data/dev/projections/helionyx.db
#
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4o-mini
# LLM_DAILY_COST_WARNING_USD=0.5
# LLM_DAILY_COST_LIMIT_USD=2.0
#
# TELEGRAM_BOT_TOKEN=<dev_bot_token_from_@BotFather>
# TELEGRAM_CHAT_ID=<your_telegram_user_id>
# NOTIFICATIONS_ENABLED=false
#
# -----------------------------------------------------------------------------
# Example: .env.staging (Staging Environment)
# -----------------------------------------------------------------------------
# LOG_LEVEL=INFO
# API_HOST=0.0.0.0
# API_PORT=8001
#
# EVENT_STORE_PATH=./data/staging/events
# PROJECTIONS_DB_PATH=./data/staging/projections/helionyx.db
#
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4o-mini
# LLM_DAILY_COST_WARNING_USD=1.0
# LLM_DAILY_COST_LIMIT_USD=10.0
#
# TELEGRAM_BOT_TOKEN=<staging_bot_token_from_@BotFather>
# TELEGRAM_CHAT_ID=<your_telegram_user_id>
# NOTIFICATIONS_ENABLED=true
#
# -----------------------------------------------------------------------------
# Example: .env.live (Production Environment)
# -----------------------------------------------------------------------------
# LOG_LEVEL=WARNING
# API_HOST=0.0.0.0
# API_PORT=8002
#
# EVENT_STORE_PATH=/var/lib/helionyx/live/events
# PROJECTIONS_DB_PATH=/var/lib/helionyx/live/projections/helionyx.db
#
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4o
# LLM_DAILY_COST_WARNING_USD=5.0
# LLM_DAILY_COST_LIMIT_USD=50.0
#
# TELEGRAM_BOT_TOKEN=<live_bot_token_from_@BotFather>
# TELEGRAM_CHAT_ID=<your_telegram_user_id>
# NOTIFICATIONS_ENABLED=true
# DAILY_SUMMARY_HOUR=20
# REMINDER_ADVANCE_HOURS=24
#
# -----------------------------------------------------------------------------
# Telegram Bot Setup (Per Environment):
# -----------------------------------------------------------------------------
# Each environment MUST have its own Telegram bot:
#
# 1. Open Telegram and chat with @BotFather
# 2. Send: /newbot
# 3. Follow prompts to create 3 bots:
#    - helionyx_dev_bot (for development)
#    - helionyx_staging_bot (for staging)
#    - helionyx_bot (for production)
# 4. Copy each bot token to corresponding .env.{env} file
# 5. Start each bot and run /start to get your CHAT_ID (logged by bot)
# 6. Update TELEGRAM_CHAT_ID in each environment file
#
# Bot usernames clearly indicate environment, preventing production spam during dev/test.
#
# -----------------------------------------------------------------------------
# See: docs/DEPLOYMENT.md for complete deployment guide
# -----------------------------------------------------------------------------
